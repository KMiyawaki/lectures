# Python(1)

## Python とは

* いわゆるスクリプト言語のひとつ
  * 他にも`ruby`とか`perl`とかあります
* C言語よりも簡単な記述
  * 使いやすい「型」、豊富なライブラリ
  * オブジェクト指向言語
* `ROS`のプログラムを書く上では必須
  * C 言語か`python`しか使えない
* **pythonでプログラムを書けるようになろう**

## プログラムの書き方と実行方法

* テキストエディタでプログラムを書く
  * `emacs`を使いましょう
  * 拡張子は伝統的に`.py`
  * 1 行目には、`#!/usr/bin/python`を
* 実行権限を与えて実行する。

```shell
chmod +x filename.py
./filename.py
```

* `python`コマンドの引数にファイル名を与えて実行することも可能。

```shell
python filename.py
```

## プログラムの中身

* 基本的にはC言語等と同じ
  * 上から下へと実行
  * 関数定義、関数呼び出し
  * ファイルの分割も可能
    * 関数を別ファイルで定義しておくとか
* 当然文法は違う
  * C言語と同じ動作を違う書き方で
  * 対応を考えながら覚えるとよい
* **C言語との違いを中心に解説**

## 変数の型

* 宣言が不要
  * いきなり使用してよい
  * 代入したものの型になる
* 型がないわけではない

| `python`        | C 言語                  |
| --------        | ----                    |
| `a = “hoe”`     | `char a[] = “hoe”;`     |
| `a = 3`         | `int a=3;`              |
| `a = 3.1415`    | `float a=3.1415;`       |
| `a = [2, 3, 5]` | `int a[3] = {2, 3, 5};` |

## 配列の中身

* 配列の中には何でも入れられる
* 複数の型の混在も可能
* 配列の中に配列を入れてもよい
  * いわゆる 2 次元配列とかが作れる

```python
a = [ 3, "hoe", 3.14 ]
b = [ 1, [ 2.1, "a", 0 ] "hoge" ]
c = [ [ 1, 2, 3, 4], [ 5, 6, 7, 8 ], [ 9, 10, 11, 12 ]]
```

## 配列の要素数

* 要素の数は自由に伸ばせる
* 宣言の時に指定する必要なし

### `Python`

```python
a =[] # 要素数 0の配列
b = [2, 3, 5] # 初期化(要素数3)
b[10] = 8 # これは範囲外でエラー
b.append(-2) # 最後に要素を追加 b = [2, 3, 5, -2] になる
c = len(b) # 要素数を返す関数
```

### C 言語

```c
int a[3];
a[5] = 8; /* 範囲外でエラー */
```

## オブジェクト指向

* `python`においてすべての変数の型はクラス

### クラスとは

* データとそれを扱う関数のセットが定義された型
* データにアクセスするにはセットになっている関数を使う必要がある
* イメージはデータを管理する市役所の窓口
* 実際のデータは
  * インスタンスと呼ばれる
  * オブジェクトとも

### クラスのイメージ

* 配列のクラス(本当は「リスト」クラス)
* クラス名「リスト」は窓口の課名
* 変数名`a`は担当者の名前
* データの出し入れは担当者に依頼

```python
a =[5, "hoe"] # 「リスト」課の a さんにデータ 5，"hoe" の管理をお願いする。
a.append(-2) # a さん、最後に「-2」を追加して。
a[0] = 3 # a さん、0 番目を「3」に変更して
c = len(a) # a さん、今、何個のデータを持っている?
```

### なぜそんな構造にするのか

* データそのものを隠蔽化
  * 勝手に変更できないように
  * 使いまわしが楽
  * 内部の実装を知らなくてよい
* 担当者が窓口の内側で何をやっているのか知らなくてよい
  * 誰もそのようなことは知りたくない
  * 窓口の内側でのやり方が変わってもこちらはいつもと同じようなやり方で頼める。
* インターフェイスさえ知っていればよい。

## リストクラスの便利な使い方

* 要素番号の指定
  * `a[-1]`は最後の 1 個
  * `a[-2]`は最後から 2 番目
  * `a[2:5]`は`a[2]`~`a[4]`までの部分リスト
* リスト同志の加算

```python
[1,2] + [1,2,4] → [1,2,1,2,4]
```

* 要素の挿入
  * `a.append(x)` : `x`を最後に追加
  * `a.insert(i, x)` : `x`を`i`番目に挿入
* 要素の削除
  * `del a[2]` : 2 番目の要素を削除
  * `b = a.pop()` : 最後の要素を削除し`b`に代入
  * `a.remove(x)` : 値が`x`である最初の要素を削除
* 値の検索
  * `x in a` : `x`がリスト中にあれば`True`
  * `a.index(x)` : 値が`x`である要素番号
* 並べ替え
  * `a.sort()` : 要素を小さい順に並べ替え
  * `a.reverse()` : 逆順に並べかえ
